Ext.define("APlan.plugin.TaskContextMenu",{extend:"Gnt.plugin.TaskContextMenu",mixins:["Gnt.mixin.Localizable"],alias:["plugin.advanced_taskcontextmenu","widget.advanced_taskcontextmenu"],createMenuItems:function(){var a=this.callParent(arguments);return[{text:this.L("changeTaskColor"),requiresTask:true,itemId:"changeTaskColor",isColorMenu:true,isValidAction:function(c){var d=this.isReadOnly(c),b=this.down("#changeTaskColor").menu;b.setDisabled(d);return !d},menu:{showSeparator:false,items:[{xtype:"colorpicker",allowReselect:true,listeners:{select:function(c,b){this.rec.set("Color",b);this.hide()},scope:this}}]}}].concat(a)},configureMenuItems:function(){this.callParent(arguments);var d=this.rec;if(!d){return}var b=this.query("[isColorMenu]")[0].menu.items.first(),c=b.getValue(),a=d.get("Color");if(b.el){if(c&&a&&a!==c){b.el.down("a.color-"+c).removeCls(b.selectedCls);if(b.el.down("a.color-"+a)){b.select(a.toUpperCase())}}else{if(c&&!a){b.el.down("a.color-"+c).removeCls(b.selectedCls)}}}}});